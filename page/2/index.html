<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hex Fantastic</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Rayer&apos;s personal code logs">
<meta property="og:type" content="website">
<meta property="og:title" content="Hex Fantastic">
<meta property="og:url" content="https://rayer.github.com/page/2/index.html">
<meta property="og:site_name" content="Hex Fantastic">
<meta property="og:description" content="Rayer&apos;s personal code logs">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hex Fantastic">
<meta name="twitter:description" content="Rayer&apos;s personal code logs">
  
    <link rel="alternate" href="/atom.xml" title="Hex Fantastic" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hex Fantastic</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">這世界有點無聊，找點架吵吧!</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://rayer.github.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-translation-chat-wars-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/23/translation-chat-wars-1/" class="article-date">
  <time datetime="2014-04-22T19:41:00.000Z" itemprop="datePublished">2014-04-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/23/translation-chat-wars-1/">翻譯:即時通大戰（上）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>寫在前面 : 這篇文章主要是在談早期MSN vs AOL的大戰。這場大戰其實結果還滿清楚的，MSN打倒了AOL Instant Messenger(AIM)，成為未來十年內最成功的IM(Instant Messenger)。這篇文章提到的不止是商場策略，而且還提到了許多技術方面的東西，尤其是Microsoft怎麼「破解」AOL Service Server</p>
<p>David Auerbach，早期的MSN主要開發工程師之一。</p>
<p>原文網址 : <a href="https://nplusonemag.com/issue-19/essays/chat-wars/" target="_blank" rel="external">n+1 Magazine - Issue 19</a></p>
<p>#Chat Wars - 即時通大戰 - David Auerbach</p>
<p>在1998年那年的夏天，我從學校畢業加入了微軟在華盛頓州，雷蒙德市的辦公室。我一進去就被分配到草創時期的MSN Messenger Service的即時通訊軟體開發的行列。老實講，這來自於行銷部門名字真是糟透了，極端的笨拙，杯底朝天的創意，大概就是他們以後常常被嘲笑的形容詞。Buddy List? CUC Me? MSN Messenger?不，我們叫他MSN Messneger Service吧。在之後的文章我們會簡稱這東西為Messenger。</p>
<p><strong>(譯註 : 其實台灣多半還是叫他MSN，這名字單看縮寫其實是還好啦….)</strong></p>
<p>在當時即時通三大巨頭是AOL Instant Messenger(AIM)，Yahoo跟ICQ。讓我們看看當年的情勢：AOL當年(1990年代)靠著大量發送，幾乎是把光碟當傳單塞到你信箱的宣傳攻勢，成為了全國最大的撥接服務提供者。而重點是：所有AOL的用戶都自動的成為了AIM的客戶，這數量可是達到了一千萬註冊量。而緊追在後的Yahoo跟ICQ則各有數百萬的客群，哇，這在90年代真的是一個相當巨大的數字概念。</p>
<p>我隨即意識到了這將會是一個相當龐大的計劃：在用戶端，我們要做一個漂亮美觀的界面，讓使用者能夠看到他們的朋友上下線，讓他們能夠自由更換整個UI上的字形字體顏色，看起來要很酷…等等的功能。這代表著，我們要弄出一個用戶端程式不止要有著其他競爭對手的功能，還要比他們更酷一點！而Server端的開發者則需要弄出一套機制來跟各個用戶端溝通，包含著告訴這些用戶端說你的朋友上下線訊息，這樣你的用戶端才能在適當時間通知你「Gordon上線啦」的視覺效果。Server端要做的事情不止於此，微軟後來為此買下了一家叫做Hotmail的公司(對，就是我們以後熟知的Hotmail)，Server端還得負責把整個Messenger系統跟Hotmail整合起來，而Hotmail本身就擁有數千萬的用戶<strong>(譯註 : 原文是Tens of Millions，不過據我所知當年Hotmail客戶並沒有那麼多，這邊應該有點誇飾了)</strong>，而最迫切最關鍵的地方在於必須把hotmail用戶資料跟Messenger整合起來讓他們可以用email登入。恩，這是一個很不簡單的工作，真的。</p>
<p>這個Team最早只有十個人，慢慢地這個team成長到了好幾倍的大小。我們在做用戶端的時候總是在討論著哪些功能是一定要做的，哪些功能是我們想要的，哪些功能是我們目前實在是搞不定的。我當年是組裡面最年輕的一個，只有20歲，以當時的講法就是青澀毫無經驗。我一開始被分配去做一個小功能，慢慢的越來越大的責任就落在我身上了。我當時在做的就是那個輸入訊息的視窗，就是夠老的人應該都記得的「在此輸入訊息…」的那個部分。這東西可沒直覺上那麼單純簡單，我在上面花了很大的苦工，我翻修了字體控制的代碼，而且還得讓他相容於非拉丁語系的那些奇怪的字元 : 中文，日文，韓文，印度文，還有左右順序跟普通文字相反的希伯來文以及阿拉伯文。處理著好友上線產生的popup視窗，讓它甚至能四處被拖拉，還有在上面植入惡名昭彰充滿著bug的online-only bars <strong>(譯註：老實講我也不知道什麼是online-only bar，有誰能補充一下嗎？)</strong> 。處理「關閉程式」這段也是個很棘手的工作，要讓每個視窗整齊劃一利落的關閉，能正確的回收占用的系統資源，在這些前提下還得讓程式不當掉 <strong>(譯註：寫過的大概才知道當年的Win16 API在這方面真的是既麻煩且棘手，不是現代人能想像的 =P)</strong> 。</p>
<p>搞定了客戶端以後，我們可以喘一口氣等Server Team搞定跟Hotmail整合的屎缺。我們除了修好了所有看得到的bug以外，還加上了一些純粹是為了好玩而加上去的小功能。不過，這產品還沒推出以前，微軟其實已經預見到要吸引新用戶的其中一個最大的困難點就是：各種即時通其實彼此是不互通的。AIM跟Yahoo是無法通話的，當然也無法跟ICQ通，所以，自然他們都沒辦法跟Messenger的用戶互相彼此通訊，這對吸引用戶來使用Messenger來講可不是好事，誰想login以後看到上面只有自己孤單一個人？AOL擁有著目前最大的客戶數量，自然我們就會先把腦子動到這上面去：如何讓Messenger的用戶可以同時Login到Messenger跟AOL的Server，用Messenger的客戶端就能跟兩種服務的使用者聊天。這個計劃我們稱之為「橋接」(Interop)</p>
<p>這真的要幹下去，老實講手法還挺粗暴的，但原理也意外的簡單。一個程式是靠一個預先定義好的Protocol(協定)去跟Server溝通，這個協定就是一種對話的模板，定義著來回「對話」的解釋方法。當年最廣泛被使用的是用於www webpage上的HTTP protocol，這個是架構在TCP/IP(一種Internet最基礎的底層通訊協定)之上的一種通訊協定。網路提供者使用者這些通訊協定來當作互相傳遞訊息的主要工具。有些通訊協定是公開的，有著完整的定義文件的，每個人都在使用的，最著名的例子就是前面提到的HTTP, TCP/IP等等的通訊協定。然而也有些是私有的，有著智慧財產權的，文件不公開的通訊協定，比方說AIM使用的通訊協定”OSCAR”(Open System for CommunicAtion in Realtime， <strong>譯註：說來諷刺，名字有個Open呢</strong> )。這並不是公開的通訊協定，所以事實上我並不知道該怎麼去解讀它。不過，解讀最好的方法就是收集足夠量的資訊。我跟我老闆就註冊了個AIM的帳號，安裝他們的用戶端，然後攔截跟觀察這個用戶端跟AIM的Server怎麼對話的。一個簡單的例子就像下面這樣 </p>
<pre><code>2A 02 EE FA 00 B0 00 0E 00 06 00 00 9B 7D BD 28  *............}.(
33 41 35 36 35 43 38 37 00 03 00 03 00 28 0D 52  3A565C87.....(.R
45 41 4C 52 65 67 72 65 73 73 6F 72 00 00 00 03  EALRegressor....
00 01 00 02 00 10 00 0F 00 04 00 00 00 18 00 03  ................
00 04 3E 4C BE 8C 00 01 00 00 00 05 00 68 00 02  ..&gt;L.........h..
00 08 75 73 2D 61 73 63 69 69 00 03 00 02 65 6E  ..us-ascii....en
00 01 00 48 69 2E 2E 20 41 6E 79 62 6F 64 79 3F  ...Hi.. Anybody?
</code></pre><p>大多數的訊息其實都是難以解讀的，不過封包中間倒是有著我們聊天的明碼訊息。”Hi… Anybody?” 當我透過打進這行字的時候，我經由從我的網路封包截取到一段內容，包含著同樣的字串。這通訊協定的封包裡面，某些部分看起來在每次傳送的時候都不太一樣，但是有些地方卻是很明顯的每次都相同。我們嘗試著用開發中的client，把抓取到的封包中間明碼的部分替代為其他的對話，然後把它送回AOL的Server。恩…AOL會發現有些奇怪的Message來自於雷蒙德市？不不不，這不太可能，他們可是有著數以百萬的使用者呢，而我們卻是實實在在的偷用他們的通訊協定在跟他們Server「對話」。我們第一次的簡單嘗試中，我們並沒有發送太多的訊息。老實說，我跟我的主管其實並不認為這個「小花招」會被採用，這功能看起來可疑性真是爆表啊！這功能大概在正式Release以前就會被拿掉吧。但是，我們錯了，上頭還滿喜歡這功能的。所以，就在1999年7月22號，Microsoft正式推出了MSN Messenger Service，也正式宣告加入即時通市場的戰局 – 我們小小的「AOL橋接系統」也包含在裡面呢。</p>
<p>這東西一推出，勇於嘗鮮的一群人當然迫不及待的試試看這東西。這東西酷斃啦，所有功能都正常，比其他家更棒的國際語言支援(那個還記得那個希伯來文跟阿拉伯文的問題嗎)，這東西跟Hotmail完美的整合，而且我們還可以用這支程式來跟本來就在AOL上的朋友聊天呢！看起來我們的小發想，獲得的成果還挺豐碩的。</p>
<p>當然，即使沒有人跟AOL通風報信，AOL還是會知道的 - 當然，相當的不高興。AOL在Server端採取了一些行動來防止Messenger連上去，而且會回傳一組訊息：「請使用官方支援的AIM，你可以在這裡下載…(連結)」。但是，想當然耳，AOL一定要知道從通訊協定上，發現使用者用的是Messenger，才有辦法封阻啊。顯然的，如果我們「偽造」的OSCAR通訊協定看起來簡直跟AIM發出的OSCAR協定一模一樣，這樣AOL的Server根本就無從得知這訊息是來自AIM還是Messenger了。我拿了AIM的Client，仔細的研究它跟AOL Server的對話，這次我們找出了封包中某些位元代表的意義以後，讓我們的Messenger可以「偽造」出更相似的OSCAR封包。同樣的攻防來回了幾輪，他們當然對他們家的AIM比我們瞭若指掌，也知道如何去利用混淆的訊息讓Server可以更正確的辨認出AIM的Client。每天這種攻防都持續著，天天有新玩意新花招！他們某天下了一招狠招，他們知道某些訊息是來自於Microsoft的研發中心，他們把所有的Messenger訊息再度成功的阻擋起來 – 唯獨故意放過來自於研發中心IP的訊息，恩，我們完全不知道他們已經成功的再度阻擋了其他使用者的Messenger呢，我們用起來看起來真完全沒有問題啊。這次AOL的防禦讓我們足足困擾了兩三個小時，我們才發現他們有這招。</p>
<p>微軟跟AOL都是在當年的超級大公司，所以很快的記者的報導就找上門了。就在兩天後的7月24號，紐約時報的頭版上就出現了這則報導：「網路世界的戰爭，正藉由即時通軟體盛大的展開！」。這…其實看起來就很像讀一篇拳擊報導，只是這次我變成了裡面海扁以及被海扁的人。當時的報紙詳實的報導著AOL努力的封鎖住Messenger的入侵，「但是微軟拒絕妥協。禮拜五稍晚，這個巨人再度補強了他們家的MSN Messenger一度突破AOL設下的障礙，但是AOL在一個小時內再度成功的重新防禦了起來！」(當年的<a href="http://www.nytimes.com/1999/07/24/business/in-cyberspace-rivals-skirmish-over-messaging.html" target="_blank" rel="external">報導原文</a>)</p>
<p>阿，我把這篇新聞紙錶匡起來做紀念。誠然，我名字並沒有被寫在上面，但是沒關係！這可是我幹的好事呢！</p>
<hr>
<p>時間來到了1999年，正是Microsoft第一個作業系統MS-DOS發行後的整整20年。微軟當時是世界上最大的公司之一，擁有超過三萬名員工，其中有一萬個在雷蒙德市。恩，用校園比喻的話，這大概跟耶魯大學差不多大。</p>
<p>這個電腦巨擘有什麼秘密？他們從以前到現在，基本上都是個徹頭徹尾的軟體公司。70年代，是個電腦沙漠的時代，一些業餘愛好者還在想盡辦法把當時還屬於巨無霸等級的電腦，不管是成本還是體積，都縮小到一個家庭可以接受的範圍，而Bill Gates跟Paul Allen - 這兩個人往後創立了Microsoft - 在那段時間也找出了在這種「相對小型」系統開發程式的方法。幾年後的1980年，他們跟IBM合作開始作出了後來有相當名氣的作業系統 - MS-DOS(for MicroSoft Disk Operation System)，搭載在第一組量產的個人電腦上 <strong>(譯註:這點其實是頗有爭議的，因為有人認為是1977年的Apple ][，而非這邊所暗示的IBM PC5100/5150。而當然，Apple ][ 搭載的並非MS-DOS )</strong> 。幾年後他們跟當年的Apple合作，提供當時的Apple一些軟體，包含了最早期的Microsoft Word在內。Gates跟Allen的高瞻遠矚，將個人電腦的發展拉到一個高峰，也讓電腦使用者會去想要替他們的電腦去添購新的軟體。</p>
<p>IBM當年跟微軟的合作，授權給微軟替IBM出品的PC製作作業系統，這其實是送了一檯印鈔機給當年的微軟。軟體的世界比硬體大得多，而且需要大型資本硬體設備的地方很少，最多最多就是製造個磁碟片，跟微處理器以及其他的硬體週邊設備比起來，實在需要投入的資本有夠低。而且，既然微軟在那個年代幾乎是唯一的家用電腦作業系統製作商，這幾乎是把自己的銷量給綁在當年瘋狂上昇的PC產業上，這可是賺錢的保證！IBM可不是當年唯一的硬體製造商，但是微軟可是唯一的主流作業系統製作商啊。</p>
<p>微軟的崛起並非惦惦吃三碗公，也絕非一凡風順。在的1984年，Apple首次公開了麥金塔，這是在個人電腦領域的首次挑戰。在1983年研發出的Lisa是很有名氣，可是他很難被稱為個人電腦，因為它要價美金10000大洋。麥金塔有著當時最先進，由Xerox Parc研發出來的作業系統，有一個相當接近我們在十年後才普遍看得到的圖形化界面。這家公司大手筆的買下了超級杯的廣告時段，宣告了次一個世代家庭電腦的新革命，說真的，Apple的宣傳詞絕不誇大。在麥金塔之前的個人電腦幾乎都是純文字界面，而這個讓你能幾乎把一切都給視覺化，幾乎就是我們現在「桌面」的定義了。我七歲的時候看到了這東西，天，這東西真是令人目眩神迷，但是當年的電腦實在不太夠力，所以也不會把這東西當作是電腦的必要界面。我當年用的電腦，也是MS-DOS界面，我還得一行行的從命令列去輸入指令，以當年來講這是再也自然不過的。但是日子到了快要90年代那段時間，家用電腦已經快到可以讓多工(看起來像是同時做兩件事情或者更多)實用化，那很明顯，圖形化界面自然就遠比普通文字命令列更具使用者友好度以及吸引力啦。</p>
<p>微軟自然也是這樣想的。在1985年他們發表了第一款Windows，有些重點當然不能漏掉，很多部分是從Apple那裡買下專利使用權的。這其實與其說是我們熟知的「視窗」，還不如說比較像是一個檔案管理員，只是你能用滑鼠去操作而已，頂多啦，再加上一些小型的程式會跳出視窗，比方說小算盤。其實這只是一個MS-DOS的改進，還離已經有現代化圖像界面的Mac遠得很。1987年，Windows 2.0發行，這版本仍然很笨拙，但是至少跟1.0版比起來好一點，至少多了可套疊的浮動視窗以及一些有用的功能。Apple當然知道微軟想要幹嘛，在1988年，他們正式對微軟採取了法律戰。</p>
<p>不過，Apple法律戰並沒有占到上風。的確Windows在很多方面看起來真的很像麥金塔的作業系統 <strong>(譯者註 : <a href="https://en.wikipedia.org/wiki/System_6" target="_blank" rel="external">System 6</a>，各位可以看看<a href="https://en.wikipedia.org/wiki/Windows_2.0" target="_blank" rel="external">Windows2.0</a>跟它有沒有很像XD)</strong> ，但是要說「一樣」或者「抄襲」似乎又有點太牽強。在法院的判決是這樣寫的：「幾乎所有有爭議的相似之處，都是從當初Apple授權來的，或者一些非常明顯的基礎設計概念。所謂的非法抄襲，應該是要看起來完全一樣才是」。</p>
<p>這個判決結果出爐於1992，Apple當然毫無疑問的上訴，但是1994年上訴也被駁回了。這對Apple來講無疑也是一個暨失去Steve Jobs以後再一記重擊 <strong>(譯註：SJ於1985年離開Apple，回歸則是1996年的事情)</strong> 。整個麥金塔品牌受困於很糟的管理階層，「高貴」定價的電腦，毫無意義的規格封閉以及保護主義以至於不開放其他公司參與製作麥金塔硬體 <strong>(譯註：其實作者這邊沒寫對，Mac Clone麥金塔相容機就是在1986年被Apple授權給其他廠商開發的，而這紙協議反倒是1996年被回歸的Steve Jobs撕毀)</strong>，這家公司眼睜睜的看著市占率在這個10年內快速下降，最後也只好把Steve Jobs再度請回來坐鎮。在Apple這些大風大浪中，毫無疑問最大的受益者就是Windows，在這些年裡面席捲了整個市場。Windows即使沒有Mac OS的典雅以及一致性，但是其實以一個OS來講這已經很OK了，跟麥金塔那貴族般的定價來相比，顯然對消費者的吸引力更加強烈。在這場法律大戰以後，Windows 95出生了。有了先前的判例，Windows這次更進一步的「偷」走Mac OS的檔案回收桶概念，把人家的「垃圾桶」改個名字叫做「資源回收桶」就拿來用在Windows 95身上。往後很長一段時間裡面，這Windows簡直看起來如入無人之境。</p>
<p>Gates跟Allen都是非常有經驗的程式設計師，但是程式設計的歷史上可是一堆比他們還要聰明許多的人，卻不像他們到最後成為了億萬富翁，他們之所以與眾不同的成功，來自於於商業手腕。他們在很長的一段時間，仍然保持著一個小公司的低姿態，說真的，一個純軟體公司實在不需要太大來製作軟體。寫程式說真的不難，但是他們對電腦來講是個到處都需要的東西，所以靠這個收到驚人的收益並不是什麼難事 <strong>(譯註：這是當年的生態，我們就不要太吐槽這觀點了…)</strong> 。在30年前，一個賣50美金的軟體，所需要投入的人力，遠比我們今天要賣50塊錢的其他東西都來得少 <strong>(這段我懷疑我有翻譯錯誤，原文是The amount of person-hours that goes into a $50 piece of software today dwarfs that of a $50 item of software thirty years ago. 感謝阿寶兄，翻譯應該是「三十年前，價值當時50塊錢的軟體需要的人力，遠比今天賣50塊錢的軟體需要的人力少得多」)</strong> 。在1983年來說，一個超原始的文字處理程式要價289，還需要用戶使用小貼紙去貼在鍵盤上來標示出各個按鍵的特殊功能 <strong>(譯註：可是仔細想想，現在的文字處理程式好像沒高明多少，也是得叫出選單來一個個記啊 XD)</strong> 。在今天來講的話，隨便一個open source或者freeware都能做的比當年這價格的軟體好得多，這世界變化真的很大啊。</p>
<p>在當年這種環境下，微軟靠著迅速的反應，積極的態度以及謹慎小心的行事快速地在軟體業界崛起。但是我得說，他們強項可不是本身的發明跟創新，而是(把別人的idea)包裝，改進跟整合。他們當初有句耳熟能詳的口號「在同級中最佳」，哎，尖酸點的說的話，就是他們會做一個產品，也許用的還是市場上其他產品的idea，進入市場，把這產品包裝成市面上看起來最ok的，然後想辦法占有這個市場，這造成了一個奇怪的循環：微軟產品好不好用，是取決於市面上其他產品好不好用。</p>
<p>Lotus的試算表「Lotus 123」是個在80年代到90年早期的殺手級軟體，而界面概念都很類似的微軟的試算表Excel則是在1985年初登場，很快的就成為微軟Office套件裡面最受歡迎的軟體之一，而反倒是Office套件裡的文字處理軟體像是WordPerfect跟WordStar感覺就比較沒那麼好，這使得自家老本業的Word跟Excel比起來相形失色。有趣的是，在當時市場上並沒有任何看起來很棒的email軟體下，Office裡面的Exchange一直都是又慢又容易當機，這情況一直至少維持到了二十一世紀初。微軟總是耗盡心力去加強他們「有競爭對手」的軟體，其他的？放著爛吧。在90年代末期，我有幸參訪了在麻州的傳奇公司Digital Equipment Corporation(就是DEC迪吉多，在往後被Compaq康柏買走了，不過這是後話），他們的文化跟微軟一整個大相徑庭。他們有許多的員工在開發Threading(執行緒，就是讓OS在CPU上同時執行數個程式)技術，他們在這領域已經開發了20年。一半的開發者都是在該領域的博士級專家。他們從來不會為了提早發行產品而對品質有所妥協。</p>
<p>唉，我想這就是微軟的「成功」祕訣吧。</p>
<p>微軟強項不在於發明創造，不過並不代表他們沒有這樣做。在Word裡面有個稱為Clippy的小元件，看起來像是個安全別針的玩意，偶爾會從右下角彈起來，這是個發明 <strong>(譯註：我也不知道Clippy是啥，作者也只有講那麼多，我看不太出來是不是諷刺啊 XD)</strong> 。Microsoft Bob是一隻戴著太陽眼鏡的黃狗，他在Windows 95裡面你可能需要幫助的時候，會跳出來當作提示者，這也是個發明。Cairo是個「聲稱是自1990年以來最具革命性的作業系統」，好吧我所知不多，要不是這東西壓根從來沒有真正的釋出過，，也許我會說他是真的「創新」。不過整個公司的氛圍來說，他們比較希望進入一個市場，然後去成為該市場的top 1，而不是去真正的「發明」出什麼東西來。在缺乏一個明確目標下，計劃永遠都是渾沌不明而且跌跌撞撞的。在1990年的這種大家都一心一意的在搞網際網路的情況下，沒人在真正的「創造」出什麼新的市場，那，微軟要去哪「搶奪」市場？這並不是說微軟或者其他人不知道「該開拓新的賺錢的市場」，而是微軟根本，完全的，沒有這種自己開創新市場的機制跟動力。他們只打算繼續在現有的市場搶奪更多，吃得更飽。</p>
<p>(作者對這段的附註，往後再翻。簡單的說，他認為XBox算是一個對MS來講很少見，開拓新市場的嘗試)<br>Of note is the single major product success of late Microsoft: the Xbox gaming console. While the Xbox has yet to turn more than a tiny overall profit since its introduction in 2001, it has established itself as a stalwart of the gaming world. This could occur for two reasons: first, unlike anything having to do with the internet, it was completely isolated from the Windows and Office empires, and so did not run afoul of those groups; and second, there were clear, existing, profitable models to copy—Nintendo’s and Sony’s—and Microsoft was willing to lose billions of dollars in re-creating that model. For the last time, they caught up to their competitors in short order and equaled them, at the cost of turning no profit themselves. ↩</p>
<p>時間繼續往下走到1999年，這時候的微軟正處於一種微妙的平衡，平衡于財務上的保守安全以及對未來的不確定性。靠著Windows跟Office這兩頭市場巨獸，微軟一直在家用以及商用市場保持著相當大的主導地位。當年美國跟微軟著名的反托拉斯法律戰在2000年前後來到了高峰，但是即使如此，這個實質上的「壟斷」仍然短期內看不到任何衰退的跡象。當年美國司法部試圖將微軟分切為兩個子公司，一個業務主要是Windows，一個業務主要是Office，但這其實也沒有任何幫助，更何況微軟上訴還推翻了這個裁決，微軟還試圖訴諸語論控訴美國司法部試圖「摧毀」一家公司。整個世間最後落幕，看起來像是個奇怪的政治性表演，我甚至懷疑這場鬧劇，除了讓軟體公司學到「要養一群律師跟國會說客」這件事情以外，對整個軟體工業有任何微乎其微的影響。</p>
<p>不過，在這段法律明刀暗槍的你一刀我一槍的過程中，我倒是發現了個有趣的事情：在我來到公司以前，公司的最高層級其實就已經有分為鷹派跟鴿派，為了公司未來的發展在激烈的爭執。鴿派主張跟各個網際網路公司合作，比方說Netscape(這是個很早的瀏覽器公司啊)甚至AOL，跟他們技術上的合作來擴展自己的影響力。而鷹派則主張全面制霸，讓微軟想儘辦法成為市場上唯一的網際網路供應者。這問題的核心其實就是在於Windows，這可是史上最賺錢的軟體啊！但是真正理想中的網際網路大未來，是靠著Internet連接各個client，而不是侷限在Windows裡面 - 一個沒有Windows的大世界，這說真的是個很困難的道路。「我可不想在後人的歷史上參上一筆，變成一個破壞史上最成功的專案的人」，一個前鷹派的微軟高階主管在爭論中這樣說道。結論是，鷹派贏了，鴿派出走，但是最後鷹派仍然是輸了這場戰役。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rayer.github.com/2014/04/23/translation-chat-wars-1/" data-id="cj3d49luk000oj3sigcxny0cc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-centos-a-ipython-notebook-last-server" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/08/centos-a-ipython-notebook-last-server/" class="article-date">
  <time datetime="2014-04-07T22:40:00.000Z" itemprop="datePublished">2014-04-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/08/centos-a-ipython-notebook-last-server/">在CentOS上架一個IPython Notebook server</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>以目前的CentOS 6.4來講，由於yum repo裡面的python仍然停留在2.6.x，所以IPython最多只能支援到0.10，無法架設起notebook。</p>
<p>##如果已經從yum安裝了iPython…<br>反安裝吧，這是鐵定要反安裝的。基本上會這樣做的大概都是因為<a href="http://ipython.org/install.html" target="_blank" rel="external">官方手冊教你的安裝法</a></p>
<pre><code>sudo yum install python-ipython-notebook
</code></pre><p>恩，南無XD 這安裝法的問題在於，目前CentOS 6.4以降的repo，能安裝的python只有到2.64，iPython也只有到0.10(要用notebook至少要0.14)，所以我們要先把這些問題都解決掉</p>
<pre><code>sudo yum remove python-ipython*
</code></pre><p>所以我們要自己裝一份python 2.7，不過也不需要移除掉2.6，後面會慢慢解釋怎麼做。不過，先至少把該裝的development tools裝回來吧</p>
<pre><code>yum groupinstall &quot;Development tools&quot;
</code></pre><p>##get python 2.7 and build this<br>有人已經幫我們<a href="http://toomuchdata.com/2014/02/16/how-to-install-python-on-centos/" target="_blank" rel="external">準備好指令</a>了，不過裡面有一點點需要修改的地方，大概長得像這樣(捏他一下，你可能會想先安裝openssl-devel…)</p>
<pre><code># Python 2.7.6:
wget http://python.org/ftp/python/2.7.6/Python-2.7.6.tar.xz
tar xf Python-2.7.6.tar.xz
cd Python-2.7.6
./configure --prefix=/usr/local --enable-unicode=ucs4 --enable-shared LDFLAGS=&quot;-Wl,-rpath /usr/local/lib&quot;
make &amp;&amp; sudo make altinstall
</code></pre><p>這會有點久。不過，當你裝好以後，python仍然是2.6，所以<code>pip install ipython</code>仍然不會成功安裝到你需要的版本(應該只能裝到0.10)，沒關係，我們看看怎麼搞定</p>
<p>##easy_install and pip2.7<br>easy_install其實算是必備的東西了，這邊就稍微提一下就好</p>
<pre><code>wget https://bitbucket.org/pypa/setuptools/raw/bootstrap/ez_setup.py
# Then install it for Python 2.7 and/or Python 3.3:
</code></pre><h1 id="前面才裝的python2-7上場"><a href="#前面才裝的python2-7上場" class="headerlink" title="前面才裝的python2.7上場"></a>前面才裝的python2.7上場</h1><pre><code>sudo python2.7 ez_setup.py
sudo /usr/local/lib/python2.7 ez_setup.py
</code></pre><p>在這裡有可能會碰到一個問題，就是sudo後path路徑就沒了。這其實是一個CentOS安全性上的設計，我們執行這段，並且把它放在rc(看你放.bashrc還是.zshrc)來讓他登入就被執行一次即可</p>
<pre><code>alias sudo=&quot;sudo env PATH=$PATH&quot;
</code></pre><p>這樣<code>sudo python2.7</code>應該就不會再碰到什麼問題了才是。現在<code>easy_install</code>就有2.7版了。把該死的pip裝下去吧</p>
<pre><code>sudo easy_install-2.7 pip
</code></pre><p>不過，在這邊有很大的機會會碰到https這路徑抓不到的問題，所以得安裝openssl。問題來了，這東西在編譯2.7的時候會自動找看有沒有安裝<code>openssl-devel</code>，如果沒裝的話，請’sudo yum install openssl-devel’以後再重新compile一次python2.7吧….</p>
<p>##sqlite problem<br> 1084  sudo pip2.7 install sqlite3<br> 1085  sudo pip2.7 install _sqlite3<br> 1086  sudo yum install libsqlite3-dev<br> 1087  sudo yum install sqlite-devel<br> 1088  cd Python-2.7.6<br> 1089  ls<br> 1090  ./config<br> 1091  ./configure</p>
<p>##start server</p>
<p>##Server problem<br> 1139  sudo yum remove python-matplotlib<br> 1140  sudo pip2.7 install matplotlib</p>
<p>##start a external server</p>
<p>##auto complete… pyreadline</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rayer.github.com/2014/04/08/centos-a-ipython-notebook-last-server/" data-id="cj3d49luh000nj3sivud9u39b" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-set-up-a-wordpress-on-the-vps-services" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/03/30/set-up-a-wordpress-on-the-vps-services/" class="article-date">
  <time datetime="2014-03-29T22:49:00.000Z" itemprop="datePublished">2014-03-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/03/30/set-up-a-wordpress-on-the-vps-services/">在VPS上架設一個WordPress服務 -- 以CentOS為例子</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>有人說過，有玩具，就要試著去玩弄它（？）。既然我們有了一台VPS，那當然不玩玩個網站說不過去。要架起一個WordPress可以說簡單，也可以說困難，端看你是怎麼架的，以及需不需要額外架設一個前端DNS Server。不過，我們都先以最簡單的方式來做</p>
<p>##下載必須元件<br>要架起WordPress的話至少需要幾個東西，包含了Apache HTTP Server(其實是可以用<a href="http://nginx.org" target="_blank" rel="external">nginx</a>或者<a href="http://www.lighttpd.net" target="_blank" rel="external">lighttpd</a>代替，不過這邊統一方便用httpd), mysql以及php. 最簡單的安裝法大概就像這樣</p>
<pre><code>yum -y install httpd php php-mysql mysql mysql-server php-gd
</code></pre><p>雖然不是必須，但是我會建議一起裝下去，等等會用到的:ftp, vsftpd</p>
<pre><code>yum -y install ftp vsftpd
</code></pre><p>-y可以拿掉，這個選項的意思就是再問你yes or no的時候一路幫你Y到底，如果你想觀賞或者研究一下怎麼跑的話，我會建議拿掉來仔細看看。安裝完畢以後，記得要設定開機時啟動服務 :</p>
<pre><code>chkconfig httpd on
chkconfig mysql on
#如果有裝vsftpd的話
chkconfig vsftpd on
</code></pre><p>當然，別忘了還要下載WordPress(<a href="http://tw.wordpress.org/wordpress-3.8.1-zh_TW.tar.gz" target="_blank" rel="external">中文版</a> <a href="https://wordpress.org/download/" target="_blank" rel="external">英文版</a>)。他語系是可以改的，不過不是那麼直覺，所以建議選擇你要的語言直接下載就好。我會建議你用wget來做這件事情，比方說</p>
<pre><code>cd ~
wget http://tw.wordpress.org/wordpress-3.8.1-zh_TW.tar.gz
tar -zxvf wordpress-3.8.1-zh_TW.tar.gz
</code></pre><p>好啦，我想我們該下載的東西都下載完畢了，接下來該開始設定了</p>
<p>##設定mysql<br>WordPress需要一個mysql 的帳號密碼來儲存所有的post，所以我們要先給wordpress一個完整的帳號密碼</p>
<pre><code>mysqladmin -u root -p &apos;&lt;你的密碼&gt;&apos;
</code></pre><p>接下來就是登入mysql去給wordpress一個帳號密碼了，我傾向于這樣做：</p>
<pre><code>mysql -u root -p
&lt;會要求你輸入密碼&gt;
#建立一個要用的wordpress資料庫
create database wordpressdb;
#建立wordpress帳號
create user wordpress@localhost;
#給予這個帳號密碼, 基本上由於我們限定他只能local登入，所以密碼不用太要求。
#如果你想給予強度高一點的密碼也是可以的，反正後面都會要你輸入。
set password for wordpressuser@localhost= password(&quot;wordpress&quot;);
#給予這個wordpress操作wordpress資料庫的權限
grant all privileges on wordpressdb.* to wordpress@localhost identified by &apos;wordpress&apos;;
flush privileges;
</code></pre><p>這樣mysql暫時算是搞定了。</p>
<p>##設定httpd<br>除非你打算做子域名，不然普通來講你的網頁應該會直接連到/var/www/html/www下的index.html。我們就直接先把wordpress給放到那裡去。基本上，這邊問題最大的應該就是權限問題，等等多半會卡在這問題上打轉。</p>
<p>首先，先把整個wordpress資料夾移到/var/www/html取代掉裡面本來的www</p>
<pre><code>cd ~
sudo rm /var/www/html/www
sudo mv wordpress /var/www/html/www
</code></pre><p>為了讓整個wordpress能夠被apache有權限讀取，有很多種不同的做法。group/owner是一種做法，不過因為後來還有一個ftp更新也會跟著加入戰局，所以我會建議直接改動權限。為了安全起見，我們所有的檔案都應該被設定為766(rwxrw-rw-)而所有在wordpress的目錄都被設為777(目錄一定要是有x屬性否則無法進入)。</p>
<pre><code>cd /var/www/html
chmod 777 www
cd www
chmod -R 766 .
find . -type d -exec chmod 777 {} \;
</code></pre><p>ok，理論上這樣應該設定算是完成一段落了，我們可以開始連上網域看看。如果出現之前的頁面的話，請重新讀取一次應該就可以了。</p>
<p>##WordPress設定</p>
<p>WordPress有引以自豪的五分鐘設定，所以應該不用過於著墨在這塊。他會要求你填入mysql帳號密碼，如果我們按照前面這定的話，資料庫就會是wordpressdb，帳號跟密碼就都會是wordpress。</p>
<p>另外，如果顯示有任何開啟檔案讀取寫入失敗的話，請用root去看<code>/var/log/httpd/error_log</code>這檔案需要root才能看得到，這會很詳細的跟你說哪個檔案讀取不良。如果你想要測試看看apache是不是能順利讀取某個檔案的話，最簡單的方法就是</p>
<pre><code>sudo -u apache cat &lt;你的檔案&gt;
</code></pre><p>後面當然就是你要看的檔案名稱。這樣就能確定apache(也就是httpd)是不是的確無法順利開啟該檔案了，這些可能的問題包括了目錄沒有w跟x權限，父目錄一路往上有權限設定錯誤等等，請往上看httpd設定這一個小節。</p>
<p>##FTP設定<br>WordPress本身使用了FTP來做更新以及許多安裝的動作，當在做update以及某些安裝的時候(plugin, theme…等等)，他會要求你提供一個ftp帳號來作業。事實上這個ftp帳號並不是架起一個ftp server那麼簡單，你必須讓它使用你提供的帳號密碼的時候，能讓他正確的登入wordpress所在目錄(以我們這裡的例子來說，就是/var/www/html/www)。在我們這個例子裡面，我們會使用vsftpd來做ftp daemon。</p>
<p>###vsftpd的設定<br>前面假設已經yum install過vsftpd了，我們開啟他的設定檔案讓他能work。其實要改的地方不太多，大概就這幾個</p>
<pre><code>#把匿名登入關掉。很奇怪的是這預設是打開的，因為opensource精神嗎（汗
#請不要以為mark掉這行就是關掉，它mark掉就是預設值(開)
anonymous_enable=NO
#把它chroot起來
#關於什麼是chroot?請參考http://fanqiang.chinaunix.net/a1/b5/20010416/134954.html
#這個也很重要，不知道為什麼預設是關的，因為opensource精神嗎（汗
chroot_local_user=YES
#這兩行是沒有的，請自己加。主要就是指定ftp的根目錄。
#當然，我們還沒有ftphome，所以我們等等要建一個
local_root=/ftphome/$USER
user_sub_token=$USER
</code></pre><p>好，所以我們現在要讓wordpress能登入ftp，所以我們要幫她加一組帳號</p>
<pre><code>sudo useradd wordpress
sudo passwd wordpress
&lt;自己輸入密碼&gt;
</code></pre><p>在這邊要講解一個概念。ftp雖然可以使用系統的帳號密碼來認證，不過整個ftp的使用者就是”ftp”。也就是說，你只要使用ftp登入這系統，你對於這個系統而言就是”ftp”這個使用者。即使wordpress用自己的帳號密碼去登入ftp，他也只能寫”ftp使用者”能夠讀寫的權限，而不是”wordpress”使用者的。</p>
<p>當然，我們就要幫”ftp”這個使用者做一個家了。</p>
<pre><code>cd /
sudo mkdir ftphome
#其實chown ftp.ftp ftphome也可以
chown ftp ftphome
chgrp ftp ftphome
cd ftphome
</code></pre><p>根據我們在vsftpd.conf裡面的設定，我們會發現如果我們用wordpress登入的話，ftp的root應該是/ftphome/wordpress。這個應該要指向/var/www/html/www才對，所以我們要做一個symbolic link</p>
<pre><code>sudo ln -s wordpress /var/www/html/www
</code></pre><p>還記得我前面提過的嗎</p>
<blockquote>
<p>group/owner是一種做法，不過因為後來還有一個ftp更新也會跟著加入戰局，所以我會建議直接改動權限。</p>
</blockquote>
<p>所以這樣的設定可以確保ftp能讀寫www這目錄，可以用ftp試試看!</p>
<p>###用ftp試試看吧</p>
<pre><code>ftp localhost
wordpress
&lt;你設的密碼&gt;
</code></pre><p>如果ok的話，恭喜，這應該設定就沒問題了。往後wordpress需要的ftp update/install等等都可以靠這組帳號密碼搞定</p>
<p>##最大上傳限制</p>
<p>預設的php上傳是2M，其實很多theme都不止這個大小，所以會報錯。所以我們得修給一下/etc/php.ini</p>
<pre><code>sudo vim /etc/php.ini
#找到下面這個把它改大
; Maximum allowed size for uploaded files.
; http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize
upload_max_filesize = 16M
</code></pre><p>我是把它改到16M啦 不過通常來講8M應該就夠了。</p>
<p>恭喜，這大概就是一整個空的VPS上設定一個wordpress的歷程。感覺是不是比虛擬主機的cPanel複雜一點（汗）。不過，我想裝完一整個流程，應該可以對Linux的運作更熟悉一點了</p>
<p>Disqus修好了，他們修得挺快的 XD</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rayer.github.com/2014/03/30/set-up-a-wordpress-on-the-vps-services/" data-id="cj3d49luf000mj3situ2u2p9j" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-java-8-far-reaching-stream-with-lambda" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/03/21/java-8-far-reaching-stream-with-lambda/" class="article-date">
  <time datetime="2014-03-20T21:53:00.000Z" itemprop="datePublished">2014-03-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/03/21/java-8-far-reaching-stream-with-lambda/">Java 8 : 影響深遠的Stream, Lambda以及Functional Interfaces</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在幾天之前Java SE 8 SDK跟著JRE8一起發布了，然後JavaFX8在數個小時以後也跟著一起公開。Java8按照Oracle的說法帶來了相當巨大的<a href="http://www.infoworld.com/d/application-development/love-and-hate-java-8-223200" target="_blank" rel="external">革新</a>，而<a href="http://openjdk.java.net/projects/jdk8/" target="_blank" rel="external">OpenJDK8</a>也很快的跟上了腳步。中間其實還有個小插曲，原本Java SE 8的GM版本在去年九月就已經要發布了，結果因為幾個安全漏洞以至於被迫延期到今年三月才發表。</p>
<p>Java8的衝擊其實算是還好，不過裡面有兩點算是特別吸引了目光，這兩點分別是Stream(跟我們知道的istream/ostream毫無關係)跟Lambda，我們來看看這兩個亮點分別是什麼樣子。</p>
<p>##Lambda<br>Lambda其實是一個在Java7就該出場的東西了，只是由於某些不知道該稱為<a href="http://blog.orfjackal.net/2013/07/lambda-expressions-backported-to-java-7.html" target="_blank" rel="external">政治因素還是排程因素</a>，直到Java8被Stream(下面會提到)火燒屁股了才端出來。</p>
<p>Lambda本身來講是一個相當簡單的技術，他已經在Scala跟Groovy實作出來很久了(<a href="http://www.csdn.net/article/2013-08-05/2816449-Love-and-hate-for-Java8" target="_blank" rel="external">有人</a>說其實根本是從scala直接搬過來的)。不過從我專案看起來的話…這個java跟groovy基本上是屬於互相抄襲的狀態(別戰我XD 我知道他們兩個之間的關係)。這個Lambda我是覺得應用影響最深遠的部分是跟下面會提到的Stream的整合，這兩個加起來根本就是…(Scala跟Groovy：哥們早就這樣跑好幾年了)</p>
<p>如果寫C/C++很熟的話，應該寫Java的時候會注意到其實Java並沒有Function Pointer這種東西。Function Pointer在C/C++的地方主要就是告訴這段code:<em><em>當我有ooxx的時候，我要用什麼函數來處理ooxx</em></em>。Java並沒有這種東西，他必須要去new一個class，利用裡面定義好的class method來做這種行為。最明顯的的例子就是sort跟comparer之間的關係。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">```</div><div class="line"></div><div class="line"></div><div class="line">##Stream</div><div class="line">Stream跟我們熟知的java.io類別裡面的stream是完全無關的東西。這個東西的主要目的是為了強化在Java裡面相當不足的Collections(這東西在Java 1.5用generic大修過一次，不過顯然修的不是很好)。這算是一種新的概念，不過這概念的確跟Java IO裡面的Stream相當類似，不過Java的collection Stream提供了一些性質跟特徵</div><div class="line"></div><div class="line">1. Stream只能操作一次，就好像檔案ifstream你讀取內容結束後就只能.close()而不能拿這個stream再去開一個檔案，你只能在重新new一個出來。</div><div class="line">2. 他提供了許多循序單位操作的東西，以這次增加的例子來說有forEach, filter, map, reduce, min, max, sorted, distinct, limit....等等（嗯，有沒有注意到好像跟Groovy/scala提供的有點像？）</div><div class="line">3. 他可以combine Lambda(很重要，可是沒必要說三次)</div></pre></td></tr></table></figure>
<p>List<something> some = getVeryBigListFromSomewhere();<br>//在之前我們如果要對這個list作拷貝動作的話<br>List<something> oldie = list.getStream().collect(Collection.toList());</something></something></p>
<p>//但是我們現在有效能更高的Collection<br>List<something> some1 = list.getStream().collect(Collection.toList());</something></p>
<p>//甚至可以用parallels的方式，分段List來增加效能<br>List<something> some2 = list.getStream().collect(Collection.toList());;<br>```</something></p>
<p>##Lambda</p>
<p>##Encore stage : Functional Interfaces</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rayer.github.com/2014/03/21/java-8-far-reaching-stream-with-lambda/" data-id="cj3d49lua000lj3siiqamkr8i" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-adult-toys-vpn-on-vps" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/03/15/adult-toys-vpn-on-vps/" class="article-date">
  <time datetime="2014-03-15T11:46:00.000Z" itemprop="datePublished">2014-03-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/03/15/adult-toys-vpn-on-vps/">大人的玩具 : VPN on VPS</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##工程師的玩具<br>有時候做工程師做到某些地步的時候，很多東西都會想自己翻出來玩玩，比方說自己也想要架個站啦，或者說自己希望有一個自己的git server啦等等。很多人或多或少都會去弄一個VPS來玩玩，一個月也才5塊10塊USD就能有一組自己用的server，可以在上面跑自己的blog，或者自己架個git，自己架個VPN…等等。當然，我自己來講的話最大的目的是要有一個穩定的server來跑自己的實驗性專案，可是開在家裡面的電腦的話一個月電費就要近千啦(請參考<a href="http://cablechen.pixnet.net/blog/post/26911720" target="_blank" rel="external">這篇文章</a>)。加上還要搞個堪用的ADSL/光世代，平常也沒用的到的話，那這個「玩具」的開銷顯然是相當可觀的。</p>
<p>這樣算算，一個月為了這個Hobby，大概至少要吃掉1張小朋友不止。當然電腦是家裡都有的，網路大家也都是吃到飽的，不過要24hr開機加上當Server需要的頻寬，造成多出來的成本每個月又是另外一回事了，加上ip不固定要弄個淺顯易懂的網域名稱也很麻煩，怎麼算實在都不太應該把家裡變成機房才對。</p>
<p>所以，當然我們就會選擇在外面租一台Server。一台實體Server要價是相當可觀的，不過由於最近流行的雲端，虛擬balabala這些就算懂也不知道怎麼解釋的概念，現在已經不再是一租就得租一台server放在機房吹冷氣的時代了，現在流行的概念是<a href="http://zh.wikipedia.org/wiki/虚拟专用服务器" target="_blank" rel="external">VPS</a>。我們運氣不錯，流行通常也是「平價」的另外一種說法（太貴要怎麼流行起來啦！），所以我們就來看看這個東西要怎麼架，大概口袋要多深才玩得起這種大人的玩具。</p>
<p>##為什麼要VPS?<br>其實這理由就跟「為什麼你會想要擱一台Server在家裡面」是完全一樣的道理。會想要在外面access檔案啦，需要git repo啦(<a href="https://github.com" target="_blank" rel="external">github</a>一個月最便宜的方案要7塊錢，我知道只要全public是免費，甚至<a href="https://bitbucket.com" target="_blank" rel="external">bitbucket</a>還可以讓你有免費的private project…不過不是本文要提的重點)，也許你需要VPN啦，你需要一個server來實驗一些東西啦…等等。</p>
<p>簡單的說，你需要一個固定的ip，以及可以隨時打開關閉的一台主機對吧。像我自己的話，我需要一台Bugzilla跟一台repo+CI做自己的專案，所以我會去找一台VPS來做這件事情。有的人可能需要架一個Minecraft伺服器（開在家裡好貴的，真的），這些都足以構成「需要一個固定ip，以及一台24hr開機的主機」的條件。</p>
<p>當然，如果只是想要一個php/cgi架站空間，那有更便宜的選擇。我想這種跟VPS需求已經<a href="http://gordon168.net/shared-hosting-and-vps-and-delicated-hosting.html" target="_blank" rel="external">很多人</a>寫過<a href="http://www.taki.com.tw/blog/options-comparing-dedicated-servers-cloud-servers-and-vps/" target="_blank" rel="external">不少文章</a>來<a href="http://tfeng.org/?p=4526" target="_blank" rel="external">探討這個</a>了。我比較懶，沒辦法寫的那麼圖文並茂，所以就請各位去翻翻這些文章了 =P。不過要稍微做點補充的是，其實並不是所有的VPS都是基於該文章說的<a href="">OpenVZ</a>以及<a href="">Xen</a>，<a href="http://www.parallels.com/products/automation/old/modules/vps/" target="_blank" rel="external">Parallels</a>自己也用了自家完全獨立的VPS技術，VMWare自己也有一套專屬的<a href="https://www.vmware.com/pdf/desktop/vmware-kvm.pdf" target="_blank" rel="external">Sphere KVM</a>。</p>
<p>##所以VPS怎麼選?<br>很多人一定第一個會推薦口碑最不錯的<a href="https://www.linode.com" target="_blank" rel="external">Linode</a>，不過我推薦的比較不同，我推薦的是可以讓你免費玩一年試著用看看的<a href="http://aws.amazon.com/ec2/" target="_blank" rel="external">Amazon EC2</a>。我在後面會聊聊我以前到現在有接觸過的VPS。</p>
<p>不是說我不推薦國貨，不過台灣的VPS是相當昂貴的，同樣的規格幾乎是外國的一倍半到兩倍的價格。除非這個VPS是以要服務台灣客戶為主，不然我並不會很推薦使用台灣的VPS。這篇文章要介紹的是玩具，不是生財工具啊…(遠目)</p>
<ul>
<li><p>###<a href="https://www.linode.com" target="_blank" rel="external">Linode</a></p>
<ul>
<li>這應該是目前最多人的選擇。穩定，客服好，加上有降過一次價（因為被某駭客團體打趴了一次，詳細故事請看<a href="http://blog.xdite.net/posts/2013/05/08/linode-hacked-htp" target="_blank" rel="external">這篇文章</a>)以後價格好了不少，算是一個相當穩定好用的VPS。真的要說缺點的話，就是他的價格是20USD/mo起跳，而這USD20給的規格其實也差不多就是做足了USD20該有的規格。20USD並不是什麼大錢，老實講。但是以一個起步用的玩玩看的實驗心態來說，這價格仍然是偏高了一點。</li>
<li>但是說真的，要是哪天這玩具玩的大了一點的話，這是個值得考慮的對象。</li>
<li>另外，他有提供功能算是很ok的Android/iPhone apps。</li>
</ul>
</li>
<li><p>###<a href="http://aws.amazon.com/ec2/" target="_blank" rel="external">Amazon Web Service - EC2</a></p>
<ul>
<li>由於他有提供新使用者一整年的t1.micro free tier usage，白話的說，就是一整年的免費 – 雖給的資源很小很陽春，但是如果你不知道你要一個VPS能幹嘛，你可以拿這個去玩一年玩玩看！至少裝個VPN(下面會教學)看看。由於這點的關係，這完全成為了新手的首選！雖然他給的規格實在是很可憐，可是一開始我相信絕大多數人連這可憐的性能都用不滿XD。再怎麼陽春至少git也跑得起來，VPN也沒有問題，阿帕契…er…我不太確定他能不能完整的裝起LAMP，不過我想對大多數人來講，都是很夠的。要注意的是，他「免費」要認的東西是id，信用卡號以及登錄電話都要是新的才會給你免費。<a href="http://blog.rx836.tw/blog/first-amazon-web-services/" target="_blank" rel="external">有人寫了篇文章</a>來介紹怎麼免費註冊EC2一年。<a href="http://blog.soft.idv.tw/?p=823" target="_blank" rel="external">這邊</a>跟<a href="http://blog.soft.idv.tw/?p=824" target="_blank" rel="external">這邊</a>也有很詳細說明怎麼申請以及使用免費的EC2。</li>
<li>不過這個連跑Minecraft server都很勉強，記憶體要壓到一半才能跑起來，但是還是能用的！真的！</li>
<li>值得一提的是，由於他們家一些超級powerful的服務的關係，如果你需要用到他們的S3阿，RDS等等的話，用他們家的EC2是設定最少最方便的，幾乎拷貝貼上就能用了。另外他們的Free tier usage裡面包含的服務不止EC2，可以順便玩玩看他們其他的服務比方說CloudFront等等。</li>
<li>不過事實上它幾乎是僅次於Krypt以後最貴的了… 但是也是少數有提供以小時計費的公司，所以網站掛點緊急開一個EC2來備援是很常見的做法。</li>
</ul>
</li>
<li><p>###<a href="https://www.digitalocean.com" target="_blank" rel="external">DigitalOcean</a></p>
<ul>
<li>這家算是我覺得平價VPS裡面最適合初學者的首選。價格屬於相當低價的範圍，而且計費是以小時/月雙軌的方法計費，開instance又很快，幾乎是一分鐘之內就開起來了，賣點還有包含他們引以自豪的SSD。如果真的喜歡控制成本怕多花錢的來講，這家這點真的是無話可說的讚。</li>
<li>不過說缺點也不算少。CPU來講這家給的是比較小氣的，這點尤其在作CI是很明顯看得出來。流量1T(5USD/mo)/2T(10USD/mo)是用不太完啦，不過有聽說有人因為BT等東西被警告的。其實對於內容控管是稍微嚴格一點，像是pornography等等，這家很像學生宿舍，便宜，但是有些東西會管。不過我想對大多數人來講，他們管的其實都跟我們再做的事情是擦不上邊的 =P</li>
<li>我目前選擇的是這家。如果願意從我這邊referal的話，請點<a href="https://www.digitalocean.com/?refcode=b5c2c6a0bfdf" target="_blank" rel="external">這個連結</a>。這個小段落關於DigitalOcean的link是沒有藏Referral code的，如果不太喜歡Referral的話可以「安全」的點這個小段落最上面DigitalOcean的介紹link :3</li>
</ul>
</li>
<li><p>###<a href="http://www.photonvps.com" target="_blank" rel="external">Photon</a></p>
<ul>
<li><a href="http://tfeng.org/?p=4539" target="_blank" rel="external">這位老兄比較圖文並茂一點</a>，所以就直接借用他的來介紹了。這家在對岸很多人推薦，也很穩，價格又很ok，所以很多人買來直接當VPN來玩 XD</li>
</ul>
</li>
<li><p>###<a href="http://directspace.net" target="_blank" rel="external">DirectSpace</a></p>
<ul>
<li>這家有一個便宜到非常恐怖至極的15USD/yr(對，一年才15塊錢)的超經濟方案（而且規格還略比EC2免費等級還好一點）。但是好像…買不到了囧。如果買的到的話這絕對是跟EC2並列的超初心者首選方案啊。應該不是饑餓行銷或者幌子，而是因為他們網站最近設備也在升級，結果就是現在很多方案，以及幾乎所有的Dedicated Server都缺貨。</li>
<li>C/P比相當不錯，不止一個人稱讚。10USD/mo可以給你到2G記憶體加上3vCPU(不過不知道真實計算能力怎樣)，這規格說真的市面上很難有人給的出來，而且我朋友是他的老客戶，也說這算頗穩了。</li>
<li>但是，他們實在是懶到一個境界 – 標準開一個Software VPS要開一整天還開不起來，買下去要給你pending個兩三天，信也常常三兩天才回，非常的放羊吃草 XD。所以我買了下去結果開到現在VPS還在pending status，兩天了… orz 所以我就退掉先了，他們有三天無條件退款機制 – 可是兩天VPS都還沒開起來是哪招…</li>
</ul>
</li>
<li><p>###<a href="http://www.krypt.com/cloud/" target="_blank" rel="external">Krypt</a></p>
<ul>
<li>Krypt基本上提供的並不是玩具等級的服務，他擁有非常完善的(以及異常昂貴的)全面零時備援以及高得驚人的頻寬(不過很妙的是他給的免費流量挺小氣的–以他的價格來講)，而且他的vCPU給的運算速度也幾乎是最高的。不過，商務來講我會選EC2或者Linode，玩具來講我會選DigitalOcean或者Photon…恩…</li>
</ul>
</li>
</ul>
<p>##不止VPS…還要再多一個Domain Name<br>基本上VPS Vender都會提供一個固定的ip給你，而大家應該會希望有一個自己的Domain Name吧。我自己的話是買了一個rayer.idv.tw, 這不貴，租三年才1080。值得注意的是，他租一年400，兩年800，第三年卻只要280，第四年又突然變高，所以租三年是最划算的。</p>
<p>至於怎麼租怎麼設定，請看<a href="http://sofree.cc/domain-name/" target="_blank" rel="external">這裡</a>。如果想租國際等級的網域如.com的話，普通都會建議去<a href="https://www.godaddy.com" target="_blank" rel="external">GoDaddy</a>去註冊，價格就請自己去看，都不會太貴，甚至比租.idv.tw還便宜點。</p>
<p>不過hinet DNS update得頗快，我用的是google的DNS(8.8.8.8/8.8.4.4)，不過基本上Hinet Domain註冊好以後ip也bind好以後5分鐘之內就指的到了，而GoDaddy常常需要花2小時到一天不等。不過，hinet雖然快而且不貴，但是由於它並不提供CNAME修改（需要你自己去架一個DNS，這不算難，別忘了我們可是有一台無所不能的VPS!不過就是麻煩）…所以有這需求的話其實其他家有更好的服務。但是，如果單純只是要價格ok更新速度又快（誰會一天到晚沒事改IP我也很好奇），hinet是首選。</p>
<p>##動手來搞一個VPN…傻瓜版本<br>所以我們也買好VPS了，準備開始開工吧！我自己選擇的是CentOS 6.x的64bit版本。這邊版本喜好就見仁見智了，不過我已CentOS來當例子，架一個最普通的VPN試試看！在古早以前，pptpd的安裝是一個很麻煩的事情，不過有位老兄用script把他徹底簡化:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo yum install git</div><div class="line">cd /opt </div><div class="line">sudo git clone git://github.com/drewsymo/VPN.git</div><div class="line">sudo cd VPN &amp;&amp; bash vpn-setup-vanilla.sh</div></pre></td></tr></table></figure>
<p>就那麼簡單。不過，如果你的VPS供應商用的是OpenVZ的話，可能要多一個步驟。如何知道你供應商用的是不是OpenVZ呢？很簡單，<code>ifconfig</code>下去看有沒有veth0或者venet0這個接口就對了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo iptables -t nat -A POSTROUTING -j SNAT --to-source x.x.x.x</div></pre></td></tr></table></figure>
<p>其中x.x.x.x就是該接口的ip位置。</p>
<p>這樣預設裝好以後只有一組帳號叫做myuser/mypass。帳號密碼設定檔其實是放在/etc/ppp/chap-secrets，我們cat一下看看</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo cat /etc/ppp/chap-secrets</div><div class="line"># Secrets for authentication using CHAP</div><div class="line"># client	server	secret			IP addresses</div><div class="line">myuser pptpd mypass *</div></pre></td></tr></table></figure>
<p>簡單啦，就在下面加入&lt;你的id&gt; pptpd &lt;你的密碼&gt; *就成啦。</p>
<p>##動手玩玩看這個VPN吧!<br>&lt;需要抓圖，待續&gt; 不過說真的大家都知道怎麼用VPN，應該也不太需要這一段了吧 =P</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rayer.github.com/2014/03/15/adult-toys-vpn-on-vps/" data-id="cj3d49lu7000kj3sihk68aroj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-constructor-call-another-constructor-w-c-11" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/02/01/constructor-call-another-constructor-w-c-11/" class="article-date">
  <time datetime="2014-01-31T17:12:00.000Z" itemprop="datePublished">2014-02-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/02/01/constructor-call-another-constructor-w-c-11/">Constructor call another Constructor w/ C++11</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>剛剛才意外發現的一個C++11 new feature, 參考一下。</p>
<p>很多情況下我們會希望能從一個constructor去call另外一個constructor，比方說<code>foo()</code>希望就可以直接比照<code>foo(0,0)</code>, 或者說<code>foo(2,6)</code>可以直接比照<code>foo(2,6,POLICY_DEFAULT)</code>。在函數層級來講這個很簡單<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">double foo() &#123;</div><div class="line">	return foo(0, 0);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>但是如果foo是個constructor的話，基本上是做不到的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">foo::foo() &#123;</div><div class="line">	foo::foo(0, 0); //error!!!</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>這個其實不止C++, Java也蠻常見這種需求的，只是一直沒有解法。在C++03/Java裡面，我們比較常見的做法只能大約做到類似這樣而已 :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">foo::foo() &#123;</div><div class="line">	init(0, 0); //或者我們也可以用default parameter的方法，init(double a = 0, double b = 0);</div><div class="line">&#125;</div><div class="line"></div><div class="line">foo::foo(double a, double b) &#123;</div><div class="line">	init(a, b);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>利用init去繞過這條限制。不過在C++11以後，這條限制就被解除了，我們可以利用相當類似C++的initialization list的方式來解決這個問題</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">foo::foo() : foo(0, 0) &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>皆大歡喜，ohya，不過java還是得用init()的方法來做 </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rayer.github.com/2014/02/01/constructor-call-another-constructor-w-c-11/" data-id="cj3d49lu5000jj3sisbofx5lt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-recycle-from-past-game-loop-update-in-c" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/23/recycle-from-past-game-loop-update-in-c/" class="article-date">
  <time datetime="2014-01-23T09:10:00.000Z" itemprop="datePublished">2014-01-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/23/recycle-from-past-game-loop-update-in-c/">(Recycle from past) Game loop update in C#</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Game loop in C#<br>Game update loop is a problem in C#. Of course, first thought of us must be attach the Idle event of Application, like this.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Application.Idle += new EventHandler(OnAppIdle);</div><div class="line">Application.Run(mMainFrame);</div><div class="line"></div><div class="line">static void OnAppIdle(object sender, EventArgs e)</div><div class="line">&#123;</div><div class="line">	//Do some game loop update here</div><div class="line">	mMainFrame.DoUpdate();</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>It seems reasonable, we register a listener to Idle event, so it must be run OnAppIdle while application idle, right?</p>
<p>Partially right.</p>
<p>When the application keep going, it will only get message while “When application need to be updated”. It means, therefore, if you leave mouse out of this application form(so no MouseMove event sent), it will totally stop, so it will be updated only when getting some message : such like OnMouseMove….etc.</p>
<p>Solution is from Rich, and he found it in sample of MDX applications. Don’t ask me how to do it, just need to know use this way to keep the game loop.</p>
<p>We might discuss this in later post =3</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">static class Program</div><div class="line">&#123;</div><div class="line">///</div><div class="line">/// The main entry point for the application.</div><div class="line">///</div><div class="line">/// </div><div class="line">	static SceneEditorMain mMainFrame;</div><div class="line">	[STAThread]</div><div class="line">	static void Main()</div><div class="line">	&#123;</div><div class="line">		Application.EnableVisualStyles();</div><div class="line">		Application.SetCompatibleTextRenderingDefault(false);</div><div class="line">		mMainFrame = new SceneEditorMain();</div><div class="line">		Application.Idle += new EventHandler(OnAppIdle);</div><div class="line">		Application.Run(mMainFrame);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	static void OnAppIdle(object sender, EventArgs e)</div><div class="line">	&#123;</div><div class="line">		while (AppStillIdle)</div><div class="line">		&#123;</div><div class="line">			mMainFrame.DoUpdate();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line"></div><div class="line">	private static bool AppStillIdle</div><div class="line">	&#123;</div><div class="line">		get</div><div class="line">		&#123;</div><div class="line">			NativeMethods.Message msg;</div><div class="line">			return !NativeMethods.PeekMessage(out msg, IntPtr.Zero, 0, 0, 0);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">	public class NativeMethods</div><div class="line">	&#123;</div><div class="line">	/**/</div><div class="line">	///</div><div class="line">	Windows Message</div><div class="line"></div><div class="line">	[StructLayout(LayoutKind.Sequential)]</div><div class="line">	public struct Message</div><div class="line">	&#123;</div><div class="line">		public IntPtr hWnd;</div><div class="line">		public uint msg;</div><div class="line">		public IntPtr wParam;</div><div class="line">		public IntPtr lParam;</div><div class="line">		public uint time;</div><div class="line">		public System.Drawing.Point p;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	[System.Security.SuppressUnmanagedCodeSecurity]</div><div class="line">	[DllImport(&quot;User32.dll&quot;, CharSet = CharSet.Auto)]</div><div class="line">	public static extern bool PeekMessage(out Message msg, IntPtr hWnd, uint messageFilterMin, uint messageFilterMax, uint flags);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://rayer.github.com/2014/01/23/recycle-from-past-game-loop-update-in-c/" data-id="cj3d49lu4000ij3sile5pzkqc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-c-11-ways-to-obtain-high-accuracy-of-time" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/22/c-11-ways-to-obtain-high-accuracy-of-time/" class="article-date">
  <time datetime="2014-01-22T02:38:00.000Z" itemprop="datePublished">2014-01-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/22/c-11-ways-to-obtain-high-accuracy-of-time/">C++11 取得精確度很高的時間的方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在製作遊戲時，有一個函數相當重要，幾乎大多數realtime的遊戲都需要它（其實只要任何東西會動，可能都跟他脫不了干系），這個函數稱為<code>update(Ty delta);</code>。這個delta在java相當容易時間，就是拿<code>System.getTimeinMillis();</code>，不過在C++裡面這個卻變得有點困難 – 在C++11以前，幾乎都得靠平台相依的方法才能取得。Windows API的話就是<code>void QueryPerformanceCounter( LARGE_INTEGER* currentTime );</code>，linux下可能就只能用<code>clock_getTime</code>或者用time_fd硬幹，C++本身只有提供time(0)可以讓你拿到一個….精確度到秒（甚至還不太精確）的…顯然不太夠用的時間。</p>
<p>C++11以後，std提供了chrono library, 使得這終於有一個跨平台的解答。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;chrono&gt;</div><div class="line">int main(int argc, const char * argv[])</div><div class="line">&#123;</div><div class="line">    typedef std::chrono::high_resolution_clock time;</div><div class="line">    typedef std::chrono::milliseconds ms;</div><div class="line">    </div><div class="line">    //initialize</div><div class="line">    auto timer = time::now();</div><div class="line">    </div><div class="line">    while(true) &#123;</div><div class="line">     </div><div class="line">        double delta = std::chrono::duration_cast&lt;std::chrono::duration&lt;double, std::ratio&lt;1&gt;&gt;&gt;(time::now() - timer).count();</div><div class="line"></div><div class="line"></div><div class="line">        std::cout &lt;&lt; delta &lt;&lt; std::endl;</div><div class="line">        timer = time::now();</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://rayer.github.com/2014/01/22/c-11-ways-to-obtain-high-accuracy-of-time/" data-id="cj3d49ltz000hj3si553z9y6z" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-talking-about-the-c-11-lambda-3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/20/talking-about-the-c-11-lambda-3/" class="article-date">
  <time datetime="2014-01-20T02:19:00.000Z" itemprop="datePublished">2014-01-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/20/talking-about-the-c-11-lambda-3/">淺談C++11 Lambda (3)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>不過Lambda也是有侷限的。</p>
<p>廢話少說，我們來複習一下世界上最低效最基礎的泡沫排序法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">void sort(std::vector&lt;int&gt;&amp; raw) &#123;</div><div class="line">	int n = raw.size();</div><div class="line">	int temp;</div><div class="line">	for (int i = n - 1; i &gt; 0; i--)</div><div class="line">	&#123;</div><div class="line">		for (int j = 0; j &lt;= i - 1; j++)</div><div class="line">		&#123;</div><div class="line">			if (raw[j] &gt; raw[j + 1])</div><div class="line">			&#123;</div><div class="line">				temp = raw[j];</div><div class="line">				raw[j] = raw[j + 1];</div><div class="line">				raw[j + 1] = temp;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main(int argc, char *argv[]) &#123;</div><div class="line">	//requires C++11</div><div class="line">	std::vector&lt;int&gt; array = &#123;15, 22, 11, 13, 72, 19&#125;;</div><div class="line">	sort(array);</div><div class="line">	</div><div class="line">	for(int i : array)</div><div class="line">		std::cout &lt;&lt; i &lt;&lt; &quot; &quot;;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>這code能吐槽的地方很多，不過我們先不管 XD。這sort我們需要至少兩種加強：</p>
<ol>
<li>他要能接受所有型別</li>
<li>他要能自定比較子(comparer, 決定A B哪個大哪個小的邏輯)</li>
</ol>
<p>我們先假設所有人對於template都很熟了，第一個需求可以很簡單的用template完成 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">template&lt;typename T&gt;</div><div class="line">void sort(std::vector&lt;T&gt;&amp; raw) &#123;</div><div class="line">	int n = raw.size();</div><div class="line">	T temp;</div><div class="line">	for (int i = n - 1; i &gt; 0; i--)</div><div class="line">	&#123;</div><div class="line">		for (int j = 0; j &lt;= i - 1; j++)</div><div class="line">		&#123;</div><div class="line">			if (raw[j] &gt; raw[j + 1])</div><div class="line">			&#123;</div><div class="line">				temp = raw[j];</div><div class="line">				raw[j] = raw[j + 1];</div><div class="line">				raw[j + 1] = temp;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>這個我想對於任何稍微懂一點點template的人來說，都不困難，而這個使用也不需要額外的引數參考，可以直接套進去</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">std::vector&lt;int&gt; array = &#123;15, 22, 11, 13, 72, 19&#125;;</div><div class="line">sort(array); //不用寫成sort&lt;int&gt;(array);</div></pre></td></tr></table></figure>
<p>接下來就是刺激的部分了。我們需要一個Camparer來加入戰場，我們可以很輕易地寫出來他的簽名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">template&lt;typename T&gt;</div><div class="line">void sort(std::vector&lt;T&gt;&amp; raw, std::function&lt;bool(T&amp;, T&amp;)&gt; comparer);</div></pre></td></tr></table></figure>
<p>這邊乍看之下是沒太大問題，但是當使用的時候問題就來了：我們需要一個default的comparer，這個comparer只需要<code>return A &gt; B;</code>即可。要是A, B所屬的class沒有定義operator&gt;(), 反正錯誤訊息會提示你說他們無從比對。ok, 所以看起來我們只要按照C++11的做法做一個default lambda來當作預設參數…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">template&lt;typename T&gt;</div><div class="line">auto defComparer = [](T&amp; A, T&amp;B)-&gt;bool&#123; return A &gt; B; &#125;;</div><div class="line"></div><div class="line">/*</div><div class="line">其實他真正的型別應該是長這樣，只是我們通常用C++11 auto呼籠過去省得麻煩而已 : </div><div class="line">template&lt;typename T&gt;</div><div class="line">std::function&lt;bool(T&amp;, T&amp;)&gt; defaultComparer = [](T&amp; a, T&amp; b)-&gt;bool&#123; return a &gt; b; &#125;;</div><div class="line">*/</div><div class="line"></div><div class="line">template&lt;typename T&gt;</div><div class="line">void sort(std::vector&lt;T&gt;&amp; raw, std::function&lt;bool(T&amp;, T&amp;)&gt; comparer = defaultComparer);</div></pre></td></tr></table></figure>
<p>鐺鐺，編譯器發出了警告，把這行code擋了下來：對不起，lambda不能為template，阿哈哈哈你看看你!<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sort_example.cpp:6:29: error: variable &apos;defaultComparer&apos; declared as a template</div><div class="line">std::function&lt;bool(T&amp;, T&amp;)&gt; defaultComparer = [](T&amp; a, T&amp; b)-&gt;bool&#123; return a &gt; b; &#125;;</div><div class="line">                            ^</div></pre></td></tr></table></figure></p>
<p>在C++11中，Lambda的實作是無法template化的。也許我們會想到利用<a href="http://blog.monkeypotion.net/gameprog/beginner/exploring-the-field-of-policy-based-class-design" target="_blank" rel="external">Policy</a>來實作這種情況，可是很不幸的是… function就是function你去哪生個繼承出來？</p>
<p>比較普遍的做法是，使用overload來解決這個問題，所以code看起來會像是這樣 : </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line"></div><div class="line">template&lt;typename T&gt;</div><div class="line">bool defaultComparer(const T&amp; a, const T&amp; b) &#123;</div><div class="line">	return a &gt; b;</div><div class="line">&#125;</div><div class="line"></div><div class="line">template&lt;typename T&gt;</div><div class="line">void sort(std::vector&lt;T&gt;&amp; raw) &#123;</div><div class="line">	int n = raw.size();</div><div class="line">	T temp;</div><div class="line">	for (int i = n - 1; i &gt; 0; i--)</div><div class="line">	&#123;</div><div class="line">		for (int j = 0; j &lt;= i - 1; j++)</div><div class="line">		&#123;</div><div class="line">			if (raw[j] &gt; raw[j + 1])</div><div class="line">			&#123;</div><div class="line">				temp = raw[j];</div><div class="line">				raw[j] = raw[j + 1];</div><div class="line">				raw[j + 1] = temp;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">template&lt;typename T&gt;</div><div class="line">void sort(std::vector&lt;T&gt;&amp; raw, std::function&lt;bool(const T&amp;, const T&amp;)&gt; comparer) &#123;</div><div class="line">	int n = raw.size();</div><div class="line">		T temp;</div><div class="line">		for (int i = n - 1; i &gt; 0; i--)</div><div class="line">		&#123;</div><div class="line">			for (int j = 0; j &lt;= i - 1; j++)</div><div class="line">			&#123;</div><div class="line">				if (comparer(raw[j], raw[j + 1]))</div><div class="line">				&#123;</div><div class="line">					temp = raw[j];</div><div class="line">					raw[j] = raw[j + 1];</div><div class="line">					raw[j + 1] = temp;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class TestObject &#123;</div><div class="line">	int a;</div><div class="line">	int b;</div><div class="line">	public:</div><div class="line">	TestObject(int a, int b) : a(a), b(b)&#123;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	TestObject() = default;</div><div class="line">	bool operator&gt;(const TestObject&amp; obj) const &#123;</div><div class="line">		return this-&gt;getValue() &gt; obj.getValue();</div><div class="line">	&#125;</div><div class="line">	int getValue() const &#123;</div><div class="line">		return a * b;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">int main(int argc, char *argv[]) &#123;</div><div class="line">	//requires C++11</div><div class="line">	std::vector&lt;int&gt; array1 = &#123;15, 22, 11, 13, 72, 19&#125;;</div><div class="line">	//吃沒有comparer的sort, 注意這個sort不需要sort&lt;int&gt; 而且int, double float等等都吃</div><div class="line">	//只要系統有定義&gt;的都吃</div><div class="line">	sort(array1);</div><div class="line">	</div><div class="line">	for(int i : array1)</div><div class="line">		std::cout &lt;&lt; i &lt;&lt; &quot; &quot;;</div><div class="line">	</div><div class="line">	std::cout &lt;&lt; std::endl;</div><div class="line">	</div><div class="line"></div><div class="line">			</div><div class="line">	std::vector&lt;TestObject&gt; array2 = &#123;TestObject(1, 4), TestObject(2, 3), TestObject(0, 4), TestObject(3, 3), TestObject(9, 1)&#125;;</div><div class="line">	</div><div class="line">	//印出排序前的Array2</div><div class="line">	for(TestObject a : array2) </div><div class="line">		std::cout &lt;&lt; a.getValue() &lt;&lt; &quot; &quot;;</div><div class="line">	std::cout &lt;&lt; std::endl;</div><div class="line">	</div><div class="line">	//使用有comparer的sort，注意這得指定型別，不過可以試試看她吃不吃沒comparer的預設版本 XD</div><div class="line">	sort&lt;TestObject&gt;(array2, [](const TestObject&amp; a, const TestObject&amp; b)-&gt;bool&#123; return a.getValue() &gt; b.getValue();&#125;);</div><div class="line">	//印出排序後的Array2</div><div class="line">	for(TestObject a : array2) </div><div class="line">		std::cout &lt;&lt; a.getValue() &lt;&lt; &quot; &quot;;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>這算一種過渡性的做法吧，哎 :3 (本文仍然會繼續修改）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rayer.github.com/2014/01/20/talking-about-the-c-11-lambda-3/" data-id="cj3d49ltw000gj3si46q2ueiq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-let-your-stdvectoror-something-else-compatible-with-stream-operator" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/20/let-your-stdvectoror-something-else-compatible-with-stream-operator/" class="article-date">
  <time datetime="2014-01-19T23:55:00.000Z" itemprop="datePublished">2014-01-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/20/let-your-stdvectoror-something-else-compatible-with-stream-operator/">Let your std::vector(or something else) compatible with stream operator &lt;&lt;</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Not a quite secret, just have some operator overload trick.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&amp; <span class="keyword">operator</span>&lt;&lt;(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&amp; target, <span class="keyword">const</span> <span class="keyword">char</span>* word) &#123;</div><div class="line">	target.insert(target.end(), word, word + <span class="built_in">std</span>::<span class="built_in">strlen</span>(word));</div><div class="line">	<span class="keyword">return</span> target;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&amp; <span class="keyword">operator</span>&lt;&lt;(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&amp; target, <span class="keyword">char</span> word) &#123;</div><div class="line">	target.push_back(word);</div><div class="line">	<span class="keyword">return</span> target;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&amp; <span class="keyword">operator</span>&lt;&lt;(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&amp; target, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; word) &#123;</div><div class="line">	<span class="keyword">return</span> (target &lt;&lt; word.c_str());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This method have several benefit, first, <code>std::vector</code> can be inserted in templated class, to replace any stream : </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> ContinerType&gt;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomethingFooFooFoo</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">somethingBalabala</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; source)</span> </span>&#123;</div><div class="line">  	ContainerType container;</div><div class="line">    container &lt;&lt; source;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">//it works</span></div><div class="line"><span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">aString</span><span class="params">(<span class="string">"I am a string"</span>)</span></span>;</div><div class="line"></div><div class="line">SomethingFooFooFoo&lt;<span class="built_in">std</span>::iostream&gt; something;</div><div class="line">something.somethingBalabala(aString); <span class="comment">//Works</span></div><div class="line"></div><div class="line">SomethingFooFooFoo&lt;<span class="built_in">std</span>::<span class="built_in">vector</span>&gt; somethingElse;</div><div class="line">somethingElse.somethingBalabala(aString); <span class="comment">//also works</span></div></pre></td></tr></table></figure>
<p>It can load up data into container, with controlled type. If you wish, you can even load any byte data into it(using first two implementations). Unloading a vector is quite easy, just use </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">const signed char* dumpData = (const signed char*)vectorContainer.data();</div></pre></td></tr></table></figure>
<p>It’s easy, but there is 2 important highlight and ignoring these will easily mess up your code:</p>
<ol>
<li>This data have the same life cycle with the vector container, if the vector is destoryed, this data will no longer valid.</li>
<li>This data should use <code>const</code> to get the data! missing <code>const</code> will directly changes data in vector, and cause unexpected side effect, be advised!</li>
</ol>
<p>For sake of safely, you should get this data via memcpy, or you know what you are doing. in general case, put both <code>dumpData</code> and <code>vectorContainer</code> in the same scope is a good idea, and it is common sense that you should not pass dumpData with pointer to outside of the scope.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://rayer.github.com/2014/01/20/let-your-stdvectoror-something-else-compatible-with-stream-operator/" data-id="cj3d49lts000ej3silehenfo1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">六月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">四月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">三月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">二月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">一月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">十二月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">八月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">七月 2013</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/05/31/在CMake裡面使用Google-Test/">在CMake裡面使用Google Test</a>
          </li>
        
          <li>
            <a href="/2016/02/03/most-vexing-parsingc/">Most Vexing Parsing(C++)</a>
          </li>
        
          <li>
            <a href="/2015/08/23/markdown-text-color-support/">Markdown文字色彩支援</a>
          </li>
        
          <li>
            <a href="/2015/06/15/sourceforge-bundled-third-party-software-causes-serious-disputes/">SourceForge綑綁第三方軟體引發嚴重爭議</a>
          </li>
        
          <li>
            <a href="/2015/04/12/oauth-with-android/">舊文回收:OAuth with Android</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Rayer<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>